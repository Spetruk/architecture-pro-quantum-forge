# Task 7: –ê–Ω–∞–ª–∏–∑ –∫–∞—á–µ—Å—Ç–≤–∞ RAG-—Å–∏—Å—Ç–µ–º—ã

## üìã –û–ø–∏—Å–∞–Ω–∏–µ
–ü—Ä–µ–≤—Ä–∞—â–µ–Ω–∏–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ RAG-–±–æ—Ç–∞ –≤ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π —Ä–∞–±–æ—á–∏–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —á–µ—Ä–µ–∑ –∞–Ω–∞–ª–∏–∑ –ø–æ–ª–Ω–æ—Ç—ã –∏ –∫–∞—á–µ—Å—Ç–≤–∞ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π.

## üéØ –¶–µ–ª–∏
- –û—Ü–µ–Ω–∏—Ç—å –ø–æ–ª–Ω–æ—Ç—É –∏ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π
- –í—ã—è–≤–∏—Ç—å —Ç–µ–º—ã, –ø–æ –∫–æ—Ç–æ—Ä—ã–º –±–æ—Ç –Ω–µ –º–æ–∂–µ—Ç –¥–∞—Ç—å –æ—Ç–≤–µ—Ç—ã
- –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å "—Å–ª–µ–ø—ã–µ –∑–æ–Ω—ã" —Å–∏—Å—Ç–µ–º—ã  
- –°–æ–∑–¥–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∫–∞—á–µ—Å—Ç–≤–∞

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞
```
Task7/
‚îú‚îÄ‚îÄ app/                    # RAG-–±–æ—Ç —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
‚îÇ   ‚îú‚îÄ‚îÄ rag_bot.py         # –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å —Å QueryLogger
‚îÇ   ‚îú‚îÄ‚îÄ web_interface.py   # Streamlit –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îÇ   ‚îî‚îÄ‚îÄ query_logger.py    # –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
‚îú‚îÄ‚îÄ logs/
‚îÇ   ‚îî‚îÄ‚îÄ query_logs/        # –õ–æ–≥–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ (CSV/JSON/SQLite)
‚îú‚îÄ‚îÄ golden_set_test.py     # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îú‚îÄ‚îÄ coverage_analyzer.py   # –ê–Ω–∞–ª–∏–∑ –ø–æ–∫—Ä—ã—Ç–∏—è –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π
‚îú‚îÄ‚îÄ log_analyzer.py        # –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤ –∑–∞–ø—Ä–æ—Å–æ–≤
‚îî‚îÄ‚îÄ rag_sequence_diagram.puml  # –î–∏–∞–≥—Ä–∞–º–º–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ó–∞–ø—É—Å–∫ RAG-–±–æ—Ç–∞ —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
```bash
cd Task7/app
./run.sh
# –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:8501
```

### –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ç–µ—Å—Ç–æ–≤
```bash
cd Task7
python3 golden_set_test.py
```

### –ê–Ω–∞–ª–∏–∑ –ø–æ–∫—Ä—ã—Ç–∏—è –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π
```bash
python3 coverage_analyzer.py
```

### –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤ –∑–∞–ø—Ä–æ—Å–æ–≤
```bash
python3 log_analyzer.py
```

## üèÜ "–ó–æ–ª–æ—Ç–æ–π –Ω–∞–±–æ—Ä" —Ç–µ—Å—Ç–æ–≤

**13 —ç—Ç–∞–ª–æ–Ω–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤** –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ RAG-—Å–∏—Å—Ç–µ–º—ã:

### ‚úÖ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ —Ç–µ–º—ã (8 –≤–æ–ø—Ä–æ—Å–æ–≤)
1. "–ö—Ç–æ —Ç–∞–∫–æ–π Arin Solara?" - –ø–µ—Ä—Å–æ–Ω–∞–∂
2. "–ß—Ç–æ —Ç–∞–∫–æ–µ Lumen Blade?" - —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è  
3. "–†–∞—Å—Å–∫–∞–∂–∏ –ø—Ä–æ Krael" - –ª–æ–∫–∞—Ü–∏—è
4. "–ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ –≤–æ –≤—Ä–µ–º—è Echo Wars?" - —Å–æ–±—ã—Ç–∏–µ
5. "–ö—Ç–æ —Ç–∞–∫–æ–π Eldar Voss?" - –ø–µ—Ä—Å–æ–Ω–∞–∂
6. "–ß—Ç–æ —Ç–∞–∫–æ–µ Rift Engine?" - —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è
7. "–†–∞—Å—Å–∫–∞–∂–∏ –ø—Ä–æ Aurelia Prime" - –ø–ª–∞–Ω–µ—Ç–∞
8. "–ß—Ç–æ —Ç–∞–∫–æ–µ Siege of Krael?" - —Å–æ–±—ã—Ç–∏–µ

### ‚ùå –ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ —Ç–µ–º—ã (5 –≤–æ–ø—Ä–æ—Å–æ–≤)  
1. "–ö—Ç–æ —Ç–∞–∫–æ–π Xarn Velgor?" - —É–¥–∞–ª—ë–Ω–Ω–∞—è —Å—É—â–Ω–æ—Å—Ç—å
2. "–ß—Ç–æ —Ç–∞–∫–æ–µ Synth Flux?" - —É–¥–∞–ª—ë–Ω–Ω–∞—è —Å—É—â–Ω–æ—Å—Ç—å
3. "–ß—Ç–æ —Ç–∞–∫–æ–µ Void Core?" - —É–¥–∞–ª—ë–Ω–Ω–∞—è —Å—É—â–Ω–æ—Å—Ç—å  
4. "–ö—Ç–æ —Ç–∞–∫–æ–π Darth Vader?" - –≤–Ω–µ—à–Ω–∏–µ –∑–Ω–∞–Ω–∏—è
5. "–ß—Ç–æ —Ç–∞–∫–æ–µ Death Star?" - –≤–Ω–µ—à–Ω–∏–µ –∑–Ω–∞–Ω–∏—è

## üìä –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

### QueryLogger –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç:
- –¢–µ–∫—Å—Ç –∑–∞–ø—Ä–æ—Å–∞ –∏ timestamp
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- –î–ª–∏–Ω–∞ –æ—Ç–≤–µ—Ç–∞ –∏ —É—Å–ø–µ—à–Ω–æ—Å—Ç—å (True/False)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏
- –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö
- –û—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –æ—Ç–≤–µ—Ç–∞

### –§–æ—Ä–º–∞—Ç—ã –ª–æ–≥–æ–≤:
- **CSV**: `logs/query_logs/queries.csv`  

## üîç –ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏:
- **–û–±—â–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å** - –ø—Ä–æ—Ü–µ–Ω—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
- **–¢–æ—á–Ω–æ—Å—Ç—å –Ω–∞ –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö —Ç–µ–º–∞—Ö** - –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å ~100%
- **–¢–æ—á–Ω–æ—Å—Ç—å –Ω–∞ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã—Ö —Ç–µ–º–∞—Ö** - –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å ~80%+
- **–î–µ—Ç–µ–∫—Ü–∏—è –≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–π** - –≤—ã—è–≤–ª–µ–Ω–∏–µ –≤—ã–¥—É–º–∞–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤

### –ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –∑–æ–Ω—ã:
1. **–ü—Ä–æ–±–µ–ª—ã –≤ –∑–Ω–∞–Ω–∏—è—Ö** - —É–¥–∞–ª—ë–Ω–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ (Void Core, Xarn Velgor, Synth Flux)
2. **LLM –≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–∏** - –≤—ã–¥—É–º—ã–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ —Ç–µ–º—ã
3. **–ù–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏** - –Ω–µ—Ç–æ—á–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ –≤–µ–∫—Ç–æ—Ä–∞–º

## üéØ –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. RAG-–±–æ—Ç —Å —É–ª—É—á—à–µ–Ω–Ω—ã–º–∏ –ø—Ä–æ–º–ø—Ç–∞–º–∏
- –ó–∞—â–∏—Ç–∞ –æ—Ç –≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–π
- –ß–µ—Å—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –Ω–µ–∑–Ω–∞–Ω–∏–∏
- –¢—Ä–∏ —Ç–µ—Ö–Ω–∏–∫–∏ –ø—Ä–æ–º–ø—Ç–∏–Ω–≥–∞ (base/few-shot/chain-of-thought)

### 2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ó–æ–ª–æ—Ç–æ–π –Ω–∞–±–æ—Ä –∏–∑ 13 –≤–æ–ø—Ä–æ—Å–æ–≤
- –û—Ü–µ–Ω–∫–∞ –≤—Å–µ—Ö —Ç–µ—Ö–Ω–∏–∫ –ø—Ä–æ–º–ø—Ç–∏–Ω–≥–∞
- –î–µ—Ç–µ–∫—Ü–∏—è –≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–π

### 3. –°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –ê–Ω–∞–ª–∏–∑ –ø–æ–∫—Ä—ã—Ç–∏—è –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π
- –í—ã—è–≤–ª–µ–Ω–∏–µ —á–∞—Å—Ç—ã—Ö –ø—Ä–æ–±–ª–µ–º

### 4. –î–∏–∞–≥—Ä–∞–º–º–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ (–≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è ‚Üí –ø–æ–∏—Å–∫ ‚Üí –≥–µ–Ω–µ—Ä–∞—Ü–∏—è)
- –ü—Ä–æ—Ü–µ—Å—Å –æ—Ü–µ–Ω–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ (–¥–µ—Ç–µ–∫—Ü–∏—è –≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–π)
- –¢–æ—á–∫–∏ –æ—Ç–∫–∞–∑–∞ —Å–∏—Å—Ç–µ–º—ã

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
# app/.env
OPENAI_API_KEY=your-api-key-here
ENABLE_LOGGING=true
LOG_FORMAT=csv
```

### Docker
```bash
cd Task7/app
docker-compose up --build
```

## üìà –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ

1. **–†–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø—Ä–æ–º–ø—Ç–æ–≤
2. **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–µ—Ö–Ω–∏–∫** –ø—Ä–æ–º–ø—Ç–∏–Ω–≥–∞  
3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–∞—á–µ—Å—Ç–≤–∞** –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
4. **–í—ã—è–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–µ–ª–æ–≤** –≤ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π
5. **–ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–π**